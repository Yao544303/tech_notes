# 知识图谱综述

## 提出背景

* 互联网的发展，网络数据内容呈现爆炸式增长的态势
* 互联网内容的大规模、异质多元、组织结构松散的特点，给人们有效获取信息和知识提出了挑战
* 初衷是为了提高搜索引擎的能力，改善用户的搜索质量以及搜索体验

## 什么是知识图谱

[Google知识图谱](https://zh.wikipedia.org/wiki/Google%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1) （英语：Google Knowledge Graph，也称Google知识图）是Google的一个知识库，其使用语义检索从多种来源收集信息，以提高Google搜索的质量。知识图谱2012年加入Google搜索，2012年5月16日正式发布。 从学术的角度，我们可以对知识图谱给一个这样的定义：“知识图谱本质上是语义网络（Semantic Network）的知识库”。 但这有点抽象，所以换个角度，从实际应用的角度出发其实可以简单地把知识图谱理解成多关系图（Multi-relational Graph） 本质上, 知识图谱旨在描述真实世界中存在的各种实体或概念及其关系,其构成一张巨大的语义网络图，节点表示实体或概念，边则由属性或关系构成。现在的知识图谱已被用来泛指各种大规模的知识库。

### 知识图谱中包含三种节点

* 实体：指的是有可区别性且独立存在的事物。如某个国家：中国、英国等；某个城市：北京、伦敦等。
* 语义类：具有某种特性的实体构成的集合，如国家、城市、民族等。
* 属性值：实体指向的属性的值。例如中国（实体）面积（属性）960万平方公里（属性值）。

关系：在知识图谱上，关系是把kk个图节点（实体、语义类、属性值）映射到布尔值的函数。

基于上述定义。基于三元组是知识图谱的一种通用表示方式(实体1-关系-实体2)和(实体-属性-属性值)

### 知识图谱架构

#### 知识图谱的逻辑结构

知识图谱的逻辑结构：知识图谱在逻辑上可分为模式层与数据层两个层次。 数据层主要是由一系列的事实组成的，通常使用三元组来表达这些事实，因而可以选择图数据库来作为存储介质，存储这些三元组。常用的图数据库有Neo4j、twitter的FlockDB、sones的GraphDB等。

模式层则构建在数据层之上，是知识图谱的核心，通常采用本体库来管理知识图谱的模式层。通过本体库形成的知识库不仅层次结构较强，并且冗余较小。 本体库：本体是指一种“形式化的，对于共享概念体系的明确而又详细的说明”，换言之即对于特定领域之中某套概念及其相互之间关系的形式化表达。 常见的本体构成要素包括：实体、语义类、属性、关系等。例如NetworkConnection的概念，其中包含NetProvider、NetSpeed实体，还有NetProvider和NetSpeed之间的关系概念，这些实体的属性概念。

#### 知识图谱构建过程

这一过程包括：信息抽取、知识表示、知识融合、知识推理四个过程。首先从最原始的数据（包括结构化、半结构化、非结构化数据）出发，采用一系列自动化或半自动化的技术手段，从原始数据中提取出实体、关系、属性等知识要素，通过一定的手段对知识要素进行表示，便于进一步处理，然后通过知识融合消除实体、关系、属性等指称项与事实对象之间的歧义，形成高质量知识库，并将其存入知识库的数据层和模式层。最后利用知识推理在已有知识库的基础上进一步挖掘隐含的知识，从而丰富扩展知识库。

#### 知识谱图构建方式

主要有两种，自顶向下（top-down）与自底向上（bottom-up）两种构建方式。

自顶向下：指的是先定义好本体与数据模式，再将实体加入到知识库。该构建方式需要利用一些现有的结构化知识库作为其基础知识库。FreeBase项目就是采用这种方式。

自底向上：指的是从一些开放链接的数据中提取出实体，选择其中置信度较高的加入到知识库，再构建顶层的本体模式。大多数知识图谱都采用自底向上的方式进行构建，其中最典型的就是Google的Knowledge Vault和微软的Satori知识库。这也符合互联网数据内容知识产生的特点。

## 关键技术

### 信息抽取

知识提取主要是面向开放的链接数据，通常典型的输入是自然语言文本或多媒体内容文档（图像或者视频）等。然后通过自动化或者半自动化的技术抽取出可用的知识单元，知识单元主要包括实体（概念的外延）、关系以及属性3个知识要素，并以此为基础，形成一系列高质量的事实表达，为上层模式层的构建奠定基础。

#### 实体抽取

实体抽取也称为命名实体学习（named entity learning）或命名实体识别（name entity recognition），指的是从原始数据语料中自动识别出命名实体。这一步是知识图谱中最为基础与关键的一步，直接影响到知识图谱构建的质量。抽取实体的方法分为4种：

* 基于百科或垂直站点提取：基于爬取技术在百科类或垂直站点标题和链接中提取实体名。
* 基于规则与词典的实体提取方法：早期的实体抽取式在限定文本领域、限定语义单元类型的条件下，通过基于规则与词典的方法，抽取文本中的实体。
* 基于统计机器学习的实体抽取方法：相关研究人员在规则与词典提取的方法上，引入监督学习算法用于命名实体抽取。
* 面向开放域的实体抽取方法：通过少量文本实例建立特征模型，再通过这个特征模型应用于新的数据集得到新的命名实体。

#### 语义类抽取

语义类抽取是指从文本中自动抽取信息来构造语义类并建立实体和语义类的关联。这里简要介绍一种语义抽取方法，包含三个模块：并列相似度计算、上下位关系提取，以及语义类生成。

* 并列相似度计算：并列相似度计算的是词与词之间的相似性信息，例如三元组（苹果，梨子，s1）表示苹果和梨子并列相似度s1，s1较高说明他们具有并列关系，可能是同一个语义类水果。
* 上下位关系提取：该模块从文档中抽取词的上下位关系信息，生成（上义词，下义词）数据对，例如（国家，中国）、（深圳，城市）。
* 语义类生成：该模块包括聚类和语义类标定两个子模块。聚类的结果决定了要生成哪些语义类以及每个语义类包含哪些实体，而语义类标定的任务是给一个语义类附加一个或者多个上位词作为其成员的公共上位词。这个模块依赖于并列相似性和上下位关系信息来进行聚类和标定。

#### 属性和属性值抽取

属性提取的任务是为每个本体语义类构造属性列表（如城市的属性包括面积、人口、所在国家、地理位置等），而属性值提取则为一个语义类的实体附加属性值。属性和属性值的抽取能够形成完整的实体概念的知识图谱维度。常见的属性和属性值抽取方法包括从百科类站点中提取，从垂直网站中进行包装器归纳，从网页表格中提取，以及利用手工定义或自动生成的模式从句子和查询日志中提取。例如电商平台中某个产品的页面，中包含了大量实体的属性信息，可以通过一定规则模板来提取属性。

#### 关系抽取

关系抽取是解决实体语义链接的问题，关系的基本信息包括参数类型、满足次关系的元组模式等。早期的关系抽取主要是通过人工构造语义规则以及模板的方法识别实体关系。随后实体间的关系模型逐渐取代了人工预定义的语法与规则。最新的方法是面向开放域的信息抽取框架，通过监督学习获得抽取器，来抽取实体间的关系。

### 知识表示

传统的知识表示方法主要是以RDF（Resource Description Framework资源描述框架）的三元组SPO（subject,property,object）来符号性描述实体间的关系。这种方法简单直观，但是在计算效率、数据稀疏性等方面面临诸多问题，近年来以深度学习为代表的表示学习技术取得了重要进展，可以将实体的语义信息表示为稠密低维实值向量，进而在低维空间中高效计算实体、关系及其之间的复杂语义关联，对知识库的构建、推理、融合以及应用均具有重要的意义。这里简要列举几个表示模型，不做过多描述：

知识表示学习的代表模型有距离模型、单层神经网络模型、双线性模型、神经张量模型、矩阵分解模型、翻译模型等。详细可以参考[清华大学刘知远的知识表示学习研究进展](http://xueshu.baidu.com/usercenter/paper/show?paperid=3a13c6c1d0227491f5bff2106a2f988e\&site=xueshu\_se\&hitarticle=1)。

#### 距离模型

首先将实体用向量表示，然后通过关系矩阵将实体投影到与实体关系对的向量空间中， 最后通过计算投影向量之间的距离来判断实体间已经存在的关系的置信度。

#### 单层神经网络模型

单层神经网络的非线性模型为知识库中每个三元组（h,r,t）定义了以下形式的评价函数： 式中向量Ut是关系r的向量化表示，函数g(x)为tanh(x)函数，Mr,1和Mr,2是通过关系r定义的两个矩阵。

### 知识融合

提取了知识后，由于知识来源广泛，这些知识常常呈现出分散、异构、自治的特点，还有冗余、噪音、不确定、非完备的特征，清洗数据并不能解决这些问题，所以必须对知识进行融合和验证。来自不同知识源的知识在同一框架规范下进行异构数据整合、消歧、加工推理验证、更新等步骤，达到数据、信息、方法、经验以及人的思想融合，形成高质量的知识库。在引入新的知识时，需要判断新知识是否正确，与已有知识是否一致，这里可以用到的证据是权威度、冗余度、多样性、一致性。

### 知识推理

所谓知识推理就是通过各种方法获取新的知识或者结论，这些知识和结论满足语义，其具体任务可分为可满足性、分类、实例化。目前知识推理的研究主要集中在针对知识图谱缺失关系的补足，即挖掘两个实体之间隐含的语义关系。

* 可满足性可体现在本体概念上，即本体可满足性是检查一个本体是否可满足某一个模型定义。例如语义类Man和Woman不可能有交集，那么不存在一个人Mike既属于Man又属于Woman。
* 分类的概念可以举如下例子：如果Mother是Women的子集，由于Women是Person子集，那么可以推理得出Mother是Person的子集这个新类别关系。
* 实例化的例子也可以如上举得，Marry是Mother的实例，由于Mother是Women的子集，那么可知Women需创建一个新的实例。

## 实践

### 定义具体的业务问题

要明确的一点是，对于自身的业务问题到底需不需要知识图谱系统的支持。

### 数据收集 & 预处理

考虑因素：

* 我们已经有哪些数据？
* 虽然现在没有，但有可能拿到哪些数据？
* 其中哪部分数据可以用来降低风险？
* 哪部分数据可

### 知识图谱的设计

1. 需要哪些实体、关系和属性？
2. 哪些属性可以做为实体，哪些实体可以作为属性？
3. 哪些信息不需要放在知识图谱中？

原则：

```
业务原则（Business Principle）：
它的含义是 “一切要从业务逻辑出发，并且通过观察知识图谱的设计也很容易推测其背后业务的逻辑，而且设计时也要想好未来业务可能的变化”

效率原则（Efficiency Principle）：
效率原则让知识图谱尽量轻量化、并决定哪些数据放在知识图谱，哪些数据不需要放在知识图谱。

分析原则（Analytics Principle）：
我们不需要把跟关系分析无关的实体放在图谱当中；

冗余原则（Redundancy Principle）：
有些重复性信息、高频信息可以放到传统数据库当中
```

## REF

* [最全知识图谱综述: 概念以及构建技术](https://blog.csdn.net/Leohfan/article/details/82630573)
* [干货 | 从零到一学习知识图谱的技术与应用](http://www.qianjia.com/html/2018-07/02\_296742.html)
* [知识图谱简介（一）——相关概念](https://blog.csdn.net/yuanl15/article/details/89875504)
* [这是一份通俗易懂的知识图谱技术与应用指南](https://www.jiqizhixin.com/articles/2018-06-20-4)
